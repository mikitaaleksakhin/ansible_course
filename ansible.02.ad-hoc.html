<h1 id="ad-hoc-commands">Ad-Hoc Commands</h1>
<h2 id="reference-info">Reference Info</h2>
<ul>
<li><a href="https://docs.ansible.com/ansible/latest/user_guide/intro_adhoc.html#intro-adhoc">Introduction to ad-hoc commands</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/user_guide/intro_getting_started.html#action-run-your-first-ansible-commands">Run your first Ansible commands</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/user_guide/modules_intro.html">Introduction to modules</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/modules/lineinfile_module.html#lineinfile-module">lineinfile – Manage lines in text files</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/modules/authorized_key_module.html#authorized-key-module">authorized_key – Adds or removes an SSH authorized key</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/modules/copy_module.html#copy-module">copy – Copy files to remote locations</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/modules/yum_module.html#yum-module">yum – Manages packages with the yum package manager</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/plugins/lookup.html#using-lookup-plugins">Using lookup plugins</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/user_guide/intro_getting_started.html#connecting-to-remote-nodes">Connecting to remote nodes</a></li>
</ul>
<h2 id="info">Info</h2>
<h3 id="what-is-an-ad-hoc-command-in-ansible">What is an ad-hoc command in Ansible?</h3>
<p>An Ansible ad-hoc command uses the /usr/bin/ansible command-line tool to automate a single task on one or more managed nodes * You can run ansible either ad-hoc or as a playbook * Both methods have the same capabilities * Ad-hoc commands are effectively one-liners</p>
<h3 id="use-cases-of-ad-hoc">Use cases of Ad-hoc</h3>
<ul>
<li>Operational commands
<ul>
<li>Checking log contents</li>
<li>Daemon control</li>
<li>Process management</li>
</ul></li>
<li>Informational commands
<ul>
<li>Check installed software</li>
<li>Check system properties</li>
<li>Gather system performance information (CPU, disk space, memory use)</li>
</ul></li>
<li>Research
<ul>
<li>Work with unfamiliar modules on test systems</li>
<li>Practice for playbook engineering</li>
</ul></li>
</ul>
<h3 id="what-are-modules">What are modules?</h3>
<p><strong>Modules</strong> are discrete units of code that can be used from the command line or in a playbook task. Ansible executes each module, usually on the remote target node, and collects return values.</p>
<h3 id="commonly-used-ansible-modules">Commonly used Ansible modules</h3>
<ul>
<li>Workng with files: <a href="https://docs.ansible.com/ansible/latest/modules/copy_module.html#copy-module">copy</a>, <a href="https://docs.ansible.com/ansible/latest/modules/archive_module.html#archive-module">archive</a>, <a href="https://docs.ansible.com/ansible/latest/modules/unarchive_module.html#unarchive-module">unarchive</a>, <a href="https://docs.ansible.com/ansible/latest/modules/get_url_module.html#get-url-module">get_url</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/modules/user_module.html#user-module">user</a>, <a href="https://docs.ansible.com/ansible/latest/modules/group_module.html#group-module">group</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/modules/ping_module.html#ping-module">ping</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/modules/service_module.html#service-module">service</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/modules/yum_module.html#yum-module">yum</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/modules/lineinfile_module.html#lineinfile-module">lineinfile</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/modules/htpasswd_module.html#htpasswd-module">htpasswd</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/modules/shell_module.html#shell-module">shell</a> and <a href="https://docs.ansible.com/ansible/latest/modules/command_module.html#command-module">command</a> modules</li>
<li><a href="https://docs.ansible.com/ansible/latest/modules/script_module.html#script-module">script</a></li>
<li><a href="https://docs.ansible.com/ansible/latest/modules/debug_module.html#debug-module">debug</a></li>
</ul>
<h2 id="tasks">Tasks</h2>
<ol style="list-style-type: decimal">
<li><p>Generate an <a href="https://www.ssh.com/ssh/keygen/">SSH keypair</a> on the control node.</p></li>
<li>Write a script <em>adhoc</em> that uses Ansible ad-hoc commands to achieve the following (use root user):
<ol style="list-style-type: decimal">
<li>Check the connectivity of your servers</li>
<li>User <em>ansible</em> is created on all inventory hosts (not the control node).</li>
<li>SSH key (that you generated) is copied to all inventory hosts for the ansible user and stored in /home/ansible/.ssh/authorized_keys.</li>
<li>The ansible user is allowed to elevate privileges on all inventory hosts without having to provide a password.</li>
</ol></li>
<li>Write a script <em>adhoc-2</em> that uses Ansible ad-hoc commands to achieve the following (ansible user):
<ol style="list-style-type: decimal">
<li>Copy the file <em>/etc/hosts</em> to <em>/tmp/hosts</em> on webservers</li>
<li>Install elinks on ansible-3</li>
<li>Find the free space of your servers</li>
<li>Find out the memory usage of your servers</li>
<li>Do an ls -l on the targets <em>/var/log/messages</em> file.</li>
<li>Tail the contents of the targets <em>/var/log/messages</em> file.</li>
</ol></li>
</ol>
<p>Run the scripts and provide the output in the text file to the tutor. Provide adhoc and adhoc-2 files as well.</p>
